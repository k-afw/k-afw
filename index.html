<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>K-AFW Daily Fortune</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #fdfdfd;
      color: #333;
      text-align: center;
      padding: 30px;
    }
    .fortune-box {
      margin-top: 20px;
      border: 1px solid #ccc;
      padding: 20px;
      border-radius: 10px;
      display: inline-block;
      background: #fff;
      text-align: left;
    }
    .fortune-box h3 {
      text-align: center;
    }
    .emoji {
      font-size: 18px;
      margin-right: 5px;
    }
    input {
      width: 80px;
      padding: 6px;
      margin: 4px;
    }
  </style>
</head>
<body>
  <h2>üîÆ Discover Your Fortune</h2>
  <p>Enter your birthdate:</p>
  <input type="number" id="year" placeholder="YYYY" />
  <input type="number" id="month" placeholder="MM" />
  <input type="number" id="day" placeholder="DD" />
  <br /><br />
  <button onclick="generateFortune()">Get My Fortune</button>

  <div id="result" class="fortune-box" style="display: none;"></div>

  <script>
    const zodiacSigns = [
      "Capricorn", "Aquarius", "Pisces", "Aries", "Taurus", "Gemini",
      "Cancer", "Leo", "Virgo", "Libra", "Scorpio", "Sagittarius"
    ];

    function getZodiac(month, day) {
      const zodiacDates = [
        [20, "Aquarius"], [19, "Pisces"], [21, "Aries"], [20, "Taurus"],
        [21, "Gemini"], [23, "Cancer"], [23, "Leo"], [23, "Virgo"],
        [23, "Libra"], [23, "Scorpio"], [22, "Sagittarius"], [22, "Capricorn"]
      ];
      return day < zodiacDates[month - 1][0]
        ? zodiacDates[(month - 2 + 12) % 12][1]
        : zodiacDates[month - 1][1];
    }

    function getDdi(year) {
      const ddi = [
        "Rat", "Ox", "Tiger", "Rabbit", "Dragon", "Snake",
        "Horse", "Goat", "Monkey", "Rooster", "Dog", "Pig"
      ];
      return ddi[year % 12];
    }

    async function generateFortune() {
      const year = parseInt(document.getElementById('year').value);
      const month = parseInt(document.getElementById('month').value);
      const day = parseInt(document.getElementById('day').value);
      if (!year || !month || !day) return alert('Please enter valid birthdate.');

      const zodiac = getZodiac(month, day);
      const ddi = getDdi(year);

      const summary = await fetchJson('bojo-summary.json', 'summary');
      const wealth = await fetchJson('bojo-wealth.json', 'wealth');
      const love = await fetchJson('bojo-love.json', 'love');
      const health = await fetchJson('bojo-health.json', 'health');

      const colorNumData = await fetch('bojo-color-number.json').then(res => res.json());
      const colors = colorNumData['lucky_color'];
      const numbers = colorNumData['lucky_number'];

      const html = `
        <h3>${ddi} + ${zodiac}</h3>
        <p><strong>‚ú® Summary</strong><br>${pick(summary)}</p>
        <p><span class="emoji">üí∞</span><strong>Wealth</strong><br>${pick(wealth)}</p>
        <p><span class="emoji">‚ù§Ô∏è</span><strong>Love</strong><br>${pick(love)}</p>
        <p><span class="emoji">üßò</span><strong>Health</strong><br>${pick(health)}</p>
        <p><span class="emoji">üé®</span><strong>Lucky Color</strong><br>${pick(colors)}</p>
        <p><span class="emoji">üî¢</span><strong>Lucky Number</strong><br>${pick(numbers)}</p>
      `;

      document.getElementById('result').style.display = 'block';
      document.getElementById('result').innerHTML = html;
    }

    async function fetchJson(url, key) {
      try {
        const res = await fetch(url);
        const json = await res.json();
        return json[key];
      } catch (e) {
        console.error(`Error loading ${url}:`, e);
        return ["(Failed to load data)"];
      }
    }

    function pick(arr) {
      return arr[Math.floor(Math.random() * arr.length)];
    }
  </script>
</body>
</html>
